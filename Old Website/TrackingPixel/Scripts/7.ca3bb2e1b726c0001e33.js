!function(){document&&document.currentScript&&document.currentScript.src;(window.webpackJsonpruntime=window.webpackJsonpruntime||[]).push([[7],{reOo:function(t,e,i){"use strict";i.r(e),i.d(e,"init",(function(){return h}));var s=i("yXPU"),r=i.n(s),n=i("J66h");class a{constructor(t){let{container:e}=t;this._positionHandlers={start:()=>{this.handle.style.setProperty("left","0"),this._clipAfterImg(0)},center:t=>{this.handle.style.setProperty("left",""),this._clipAfterImg(t.width/2)},end:t=>{this.handle.style.setProperty("left",`${t.width}px`),this._clipAfterImg(t.width)}},this.container=e,this.doc=this.container.ownerDocument.documentElement,this._initialized=this.initSizes();const i=this.handle.getBoundingClientRect();this.offset={left:i.width/2,top:i.height/2},this._bindMethods(),this.handle.style.setProperty("left",""),this.handle.addEventListener("touchstart",this.startDragging),this.handle.addEventListener("mousedown",this.startDragging),this.observer=new MutationObserver(this.updateData),this.observer.observe(this.container,{attributes:!0,childList:!1,subtree:!1})}initSizes(){var t=this;return r()((function*(){t.beforeImg=t.container.querySelector(".baf__img-preview.baf__before"),t.afterImg=t.container.querySelector(".baf__img-preview.baf__after"),t.innerAfterImg=t.afterImg.querySelector("img"),t.handle=t.container.querySelector(".baf__handle"),yield Promise.all([t._waitForImgLoad(t.beforeImg),t._waitForImgLoad(t.innerAfterImg)]),t._rePosition(),t.container.ownerDocument.defaultView.addEventListener("resize",t._rePosition),t.container.ownerDocument.defaultView.addEventListener("orientationchange",t._rePosition)}))()}release(){this.observer.disconnect(),this.handle.removeEventListener("touchstart",this.startDragging),this.handle.removeEventListener("mousedown",this.startDragging),this.container.ownerDocument.defaultView.removeEventListener("resize",this._rePosition),this.container.ownerDocument.defaultView.removeEventListener("orientationchange",this._rePosition),this._stopTrackingMouseEvents()}startDragging(t){this.container.classList.add("baf__dragging"),this.container.classList.add("user-interacting"),this.containerRect=this.container.getBoundingClientRect();const e=this.handle.getBoundingClientRect(),{clientX:i}=c(t);this.handle.style.transform=`translate(${i-this.containerRect.left-e.width/2}px, -50%)`,this.handle.style.left="",this._startTrackingMouseEvents()}performUpdates(t){const{clientX:e}=c(t);this.movedTo=this._calculateMoveTo(e),this.handle.style.transform=`translate(${this.movedTo-this.offset.left}px, -50%)`,this._clipAfterImg(this.movedTo)}_calculateMoveTo(t){const e=t-this.containerRect.left,i=Math.max(0,e);return e>this.containerRect.width?this.containerRect.width:i}updatesAfterDrag(){this.container.classList.remove("baf__dragging"),this.container.classList.remove("user-interacting"),this.handle.style.setProperty("transform",""),this.handle.style.setProperty("left",`${this.movedTo}px`),this._stopTrackingMouseEvents()}updateData(t){Array.from(t).forEach(t=>{let{attributeName:e}=t;if("data-ext"!==e)return;const i=this.extractData();this.applyData(i)})}extractData(){return JSON.parse(n.Base64.decode(this.container.dataset.ext))}applyData(t){let{imgBefore:e,imgBeforeAlt:i,imgAfter:s,imgAfterAlt:r,beforeText:n,afterText:a,beforeTextVisible:o,afterTextVisible:h}=t;this.beforeImg.src=e||this.beforeImg.src,this.beforeImg.setAttribute("alt",i),this.innerAfterImg.src=s||this.innerAfterImg.src,this.innerAfterImg.setAttribute("alt",r);const c=this.container.querySelector(".baf__title"),d=this.container.querySelector(".baf__title.baf__before");c.innerText=n,c.classList.toggle("baf__title--hidden",!o),d.innerText=a,d.classList.toggle("baf__title--hidden",!h),this._initialized=this.initSizes()}_rePosition(){const{width:t,height:e}=getComputedStyle(this.container);this.afterImg.style.width=t,this.afterImg.style.height=e;const i=this.container.getBoundingClientRect();this.handle.style.setProperty("left","");const{initialPosition:s}=this.extractData();(this._positionHandlers[s]||this._positionHandlers.center)(i)}_clipAfterImg(t){this.afterImg.style.transform=`translate(${t}px, 0)`,this.innerAfterImg.style.transform=`translate(-${t}px, 0)`}_stopTrackingMouseEvents(){this.doc.removeEventListener("touchmove",this.performUpdates,{passive:!0,capture:!0}),this.doc.removeEventListener("mousemove",this.performUpdates,{passive:!0,capture:!0}),this.doc.removeEventListener("touchend",this.updatesAfterDrag,{capture:!0}),this.doc.removeEventListener("mouseup",this.updatesAfterDrag,{capture:!0})}_startTrackingMouseEvents(){this.doc.addEventListener("touchmove",this.performUpdates,{passive:!0,capture:!0}),this.doc.addEventListener("mousemove",this.performUpdates,{passive:!0,capture:!0}),this.doc.addEventListener("touchend",this.updatesAfterDrag,{capture:!0}),this.doc.addEventListener("mouseup",this.updatesAfterDrag,{capture:!0})}_waitForImgLoad(t){return new Promise(e=>{t.onload=()=>{window.requestAnimationFrame(e)},t.src=t.src.slice()})}_bindMethods(){this.startDragging=this.startDragging.bind(this),this.performUpdates=this.performUpdates.bind(this),this.updatesAfterDrag=this.updatesAfterDrag.bind(this),this.updateData=this.updateData.bind(this),this._rePosition=this._rePosition.bind(this)}}a.displayName="BeforeAndAfter";const o={};function h(t){return Array.from(document.querySelectorAll(".dmBeforeAndAfter")).forEach(t=>{o[t.id]&&o[t.id].release(),o[t.id]=new a({container:t})}),o[(t||{}).id]||{}}function c(t){return t.type.includes("touch")?(t.touches||t.changedTouches)[0]:t}}}])}();